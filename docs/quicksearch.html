<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"utils_index.js.html":{"id":"utils_index.js.html","title":"Source: utils/index.js","body":" Common Modules Global addClassasyncRoutesbyteLengthcardSortcheckSubjectcleanArrayconstantRoutescreateUniqueStringdataTypedebouncedeepClonedoResizefilterAsyncRoutesformatTimegetFullDatagetQueryObjectgetTimehasClasshasPermissionhtml2TextisArrayisExternalisStringmovenumberFormatterobjectMergeparamparam2ObjparseTimepluralizeremoveClassscrollTosorttimeAgotoggleClasstoThousandFilteruniqueuniqueArruppercaseFirstvalidAlphabetsvalidEmailvalidLowerCasevalidUpperCasevalidURLvalidUsernamewashValue Source: utils/index.js import { Message } from 'element-ui' import store from '@/store' /** * Created by PanJiaChen on 16/11/18. */ /** * Parse the time to string * @param {(Object|string|number)} time * @param {string} cFormat * @returns {string | null} */ export function parseTime(time, cFormat) { if (arguments.length === 0) { return null } const format = cFormat || '{y}-{m}-{d} {h}:{i}:{s}' let date if (typeof time === 'object') { date = time } else { if ((typeof time === 'string')) { if ((/^[0-9]+$/.test(time))) { // support \"1548221490638\" time = parseInt(time) } else { // support safari // https://stackoverflow.com/questions/4310953/invalid-date-in-safari time = time.replace(new RegExp(/-/gm), '/') } } if ((typeof time === 'number') &amp;&amp; (time.toString().length === 10)) { time = time * 1000 } date = new Date(time) } const formatObj = { y: date.getFullYear(), m: date.getMonth() + 1, d: date.getDate(), h: date.getHours(), i: date.getMinutes(), s: date.getSeconds(), a: date.getDay() } const time_str = format.replace(/{([ymdhisa])+}/g, (result, key) =&gt; { const value = formatObj[key] // Note: getDay() returns 0 on Sunday if (key === 'a') { return ['日', '一', '二', '三', '四', '五', '六'][value ] } // console.log('value:', value) return value.toString().padStart(2, '0') // return value }) return time_str } /** * @param {number} time * @param {string} option * @returns {string} */ export function formatTime(time, option) { if (('' + time).length === 10) { time = parseInt(time) * 1000 } else { time = +time } const d = new Date(time) const now = Date.now() const diff = (now - d) / 1000 if (diff &lt; 30) { return '刚刚' } else if (diff &lt; 3600) { // less 1 hour return Math.ceil(diff / 60) + '分钟前' } else if (diff &lt; 3600 * 24) { return Math.ceil(diff / 3600) + '小时前' } else if (diff &lt; 3600 * 24 * 2) { return '1天前' } if (option) { return parseTime(time, option) } else { return ( d.getMonth() + 1 + '月' + d.getDate() + '日' + d.getHours() + '时' + d.getMinutes() + '分' ) } } /** * @param {string} url * @returns {Object} */ export function getQueryObject(url) { url = url == null ? window.location.href : url const search = url.substring(url.lastIndexOf('?') + 1) const obj = {} const reg = /([^?&amp;=]+)=([^?&amp;=]*)/g search.replace(reg, (rs, $1, $2) =&gt; { const name = decodeURIComponent($1) let val = decodeURIComponent($2) val = String(val) obj[name] = val return rs }) return obj } /** * @returns {number} output value * @param subjects * @param views */ export function checkSubject() { // console.log(store.state.options.views) let _subject = [] const notFind = [] store.state.options.views.forEach(item =&gt; { Object.keys(item.items).forEach((key) =&gt; { // 统一 if (typeof item.items[key] === 'string') { _subject.push(item.items[key]) } else { item.items[key].forEach(s =&gt; _subject.push(s)) } }) }) _subject = [...new Set(_subject)] _subject = _subject.sort((a, b) =&gt; a.name - b.name) store.state.options.subject = store.state.options.subject.sort() // console.log('_subject:', _subject) _subject.forEach(item =&gt; { const _v = store.state.options.subject.find(s =&gt; s.name === item) // console.log('_v:', _v) if (!_v) { // console.log('_v:', _v, item) notFind.push(item) } }) // all group local * // // console.log(store.state.options.subject) // console.log('notFind:', notFind) if (notFind.length &gt; 0) { // console.log('subject未找到', notFind) Message({ message: `view subject -${notFind.length}`, type: 'info', duration: 5 * 1000 }) } else { Message({ message: 'success', type: 'success', duration: 5 * 1000 }) } } /** * @param {string} input value * @returns {number} output value */ export function byteLength(str) { // returns the byte length of an utf8 string let s = str.length for (var i = str.length - 1; i &gt;= 0; i--) { const code = str.charCodeAt(i) if (code &gt; 0x7f &amp;&amp; code &lt;= 0x7ff) s++ else if (code &gt; 0x7ff &amp;&amp; code &lt;= 0xffff) s += 2 if (code &gt;= 0xDC00 &amp;&amp; code &lt;= 0xDFFF) i-- } return s } /** * @returns {Array} * @param value */ export function washValue(value) { value = parseFloat(value) value = isNaN(value) || value === Infinity || value === -Infinity ? undefined : value return value } /** * @param {Array} actual * @returns {Array} */ export function cleanArray(actual) { const newArray = [] for (let i = 0; i &lt; actual.length; i++) { if (actual[i]) { newArray.push(actual[i]) } } return newArray } /** * @param {Object} json * @returns {Array} */ export function param(json) { if (!json) return '' return cleanArray( Object.keys(json).map(key =&gt; { if (json[key] === undefined) return '' return encodeURIComponent(key) + '=' + encodeURIComponent(json[key]) }) ).join('&amp;') } /** * @param {string} url * @returns {Object} */ export function param2Obj(url) { const search = url.split('?')[1] if (!search) { return {} } return JSON.parse( '{\"' + decodeURIComponent(search) .replace(/\"/g, '\\\\\"') .replace(/&amp;/g, '\",\"') .replace(/=/g, '\":\"') .replace(/\\+/g, ' ') + '\"}' ) } /** * @param {string} val * @returns {string} */ export function html2Text(val) { const div = document.createElement('div') div.innerHTML = val return div.textContent || div.innerText } /** * Merges two objects, giving the last one precedence * @param {Object} target * @param {(Object|Array)} source * @returns {Object} */ export function objectMerge(target, source) { if (typeof target !== 'object') { target = {} } if (Array.isArray(source)) { return source.slice() } Object.keys(source).forEach(property =&gt; { const sourceProperty = source[property] if (typeof sourceProperty === 'object') { target[property] = objectMerge(target[property], sourceProperty) } else { target[property] = sourceProperty } }) return target } /** * @param {HTMLElement} element * @param {string} className */ export function toggleClass(element, className) { if (!element || !className) { return } let classString = element.className const nameIndex = classString.indexOf(className) if (nameIndex === -1) { classString += '' + className } else { classString = classString.substr(0, nameIndex) + classString.substr(nameIndex + className.length) } element.className = classString } /** * @param {string} type * @returns {Date} */ export function getTime(type) { if (type === 'start') { return new Date().getTime() - 3600 * 1000 * 24 * 90 } else { return new Date(new Date().toDateString()) } } /** * @param {Function} func * @param {number} wait * @param {boolean} immediate * @return {*} */ export function debounce(func, wait, immediate) { let timeout, args, context, timestamp, result const later = function() { // 据上一次触发时间间隔 const last = +new Date() - timestamp // 上次被包装函数被调用时间间隔 last 小于设定时间间隔 wait if (last &lt; wait &amp;&amp; last &gt; 0) { timeout = setTimeout(later, wait - last) } else { timeout = null // 如果设定为immediate===true，因为开始边界已经调用过了此处无需调用 if (!immediate) { result = func.apply(context, args) if (!timeout) context = args = null } } } return function(...args) { context = this timestamp = +new Date() const callNow = immediate &amp;&amp; !timeout // 如果延时不存在，重新设定延时 if (!timeout) timeout = setTimeout(later, wait) if (callNow) { result = func.apply(context, args) context = args = null } return result } } /** * This is just a simple version of deep copy * Has a lot of edge cases bug * If you want to use a perfect deep copy, use lodash's _.cloneDeep * @param {Object} source * @returns {Object} */ export function deepClone(source) { if (!source &amp;&amp; typeof source !== 'object') { throw new Error('error arguments', 'deepClone') } const targetObj = source.constructor === Array ? [] : {} Object.keys(source).forEach(keys =&gt; { if (source[keys] &amp;&amp; typeof source[keys] === 'object') { targetObj[keys] = deepClone(source[keys]) } else { targetObj[keys] = source[keys] } }) return targetObj } /** * @param {Array} arr * @returns {Array} */ export function uniqueArr(arr) { return Array.from(new Set(arr)) } /** * @param {Array} arr * @returns {Array} */ export function unique(arr1) { const res = new Map() return arr1.filter((a) =&gt; !res.has(a.name) &amp;&amp; res.set(a.name, 1)) } /** * @param {Array} arr * @returns {Array} */ export function sort(arr1) { // return arr1.sort((a, b) =&gt; { return a.name.charCodeAt(0) - b.name.charCodeAt(0) }) // return arr1.sort((a, b) =&gt; { return a.title.localeCompare(b.title) }) return arr1.sort((a, b) =&gt; { return a.index - b.index }) } /** * @returns {Array} * @param arr */ export function cardSort(arr) { // return arr1.sort((a, b) =&gt; { return a.name.charCodeAt(0) - b.name.charCodeAt(0) }) // return arr1.sort((a, b) =&gt; { return a.title.localeCompare(b.title) }) return arr.sort((a, b) =&gt; { return a.config.component.cardIndex - b.config.component.cardIndex }) } /** * @returns {string} */ export function createUniqueString() { const timestamp = +new Date() + '' const randomNum = parseInt((1 + Math.random()) * 65536) + '' return (+(randomNum + timestamp)).toString(32) } /** * Check if an element has a class * @param {HTMLElement} elm * @param {string} cls * @returns {boolean} */ export function hasClass(ele, cls) { return !!ele.className.match(new RegExp('(\\\\s|^)' + cls + '(\\\\s|$)')) } /** * Add class to element * @param {HTMLElement} elm * @param {string} cls */ export function addClass(ele, cls) { if (!hasClass(ele, cls)) ele.className += ' ' + cls } /** * Remove class from element * @param {HTMLElement} elm * @param {string} cls */ export function removeClass(ele, cls) { if (hasClass(ele, cls)) { const reg = new RegExp('(\\\\s|^)' + cls + '(\\\\s|$)') ele.className = ele.className.replace(reg, ' ') } } × Search results Close "},"router_index.js.html":{"id":"router_index.js.html","title":"Source: router/index.js","body":" Common Modules Global addClassasyncRoutesbyteLengthcardSortcheckSubjectcleanArrayconstantRoutescreateUniqueStringdataTypedebouncedeepClonedoResizefilterAsyncRoutesformatTimegetFullDatagetQueryObjectgetTimehasClasshasPermissionhtml2TextisArrayisExternalisStringmovenumberFormatterobjectMergeparamparam2ObjparseTimepluralizeremoveClassscrollTosorttimeAgotoggleClasstoThousandFilteruniqueuniqueArruppercaseFirstvalidAlphabetsvalidEmailvalidLowerCasevalidUpperCasevalidURLvalidUsernamewashValue Source: router/index.js import Vue from 'vue' import Router from 'vue-router' Vue.use(Router) /* Layout */ import Layout from '@/layout' /* Router Modules */ // import componentsRouter from './modules/components' // import chartsRouter from './modules/charts' // import tableRouter from './modules/table' // import nestedRouter from './modules/nested' /** * Note: sub-menu only appear when route children.length &gt;= 1 * Detail see: https://panjiachen.github.io/vue-element-admin-site/guide/essentials/router-and-nav.html * * hidden: true if set true, item will not show in the sidebar(default is false) * alwaysShow: true if set true, will always show the root menu * if not set alwaysShow, when item has more than one children route, * it will becomes nested mode, otherwise not show the root menu * redirect: noRedirect if set noRedirect will no redirect in the breadcrumb * name:'router-name' the name is used by &lt;keep-alive&gt; (must set!!!) * meta : { roles: ['admin','editor'] control the page roles (you can set multiple roles) title: 'title' the name show in sidebar and breadcrumb (recommend set) icon: 'svg-name' the icon show in the sidebar noCache: true if set true, the page will no be cached(default is false) affix: true if set true, the tag will affix in the tags-view breadcrumb: false if set false, the item will hidden in breadcrumb(default is true) activeMenu: '/example/list' if set path, the sidebar will highlight the path you set } */ /** * constantRoutes * a base page that does not have permission requirements * all roles can be accessed */ export const constantRoutes = [ { path: '/redirect', component: Layout, hidden: true, children: [ { path: '/redirect/:path(.*)', component: () =&gt; import('@/views/redirect/index') } ] }, { path: '/login', component: () =&gt; import('@/views/login/index'), hidden: true }, { path: '/auth-redirect', component: () =&gt; import('@/views/login/auth-redirect'), hidden: true }, // { // path: '/project', // component: () =&gt; import('@/views/login/auth-redirect'), // hidden: true // }, { path: '/404', component: () =&gt; import('@/views/error-page/404'), hidden: true }, { path: '/401', component: () =&gt; import('@/views/error-page/401'), hidden: true }, { path: '/', component: Layout, // redirect: '/dashboard', redirect: '/panels/report' // children: [ // { // path: 'dashboard', // component: () =&gt; import('@/views/dashboard/index'), // name: 'Dashboard', // hidden: true, // meta: { title: '首页', icon: 'dashboard', affix: true } // } // ] } // { // path: '/documentation', // component: Layout, // children: [ // { // path: 'index', // component: () =&gt; import('@/views/documentation/index'), // name: 'Documentation', // meta: { title: 'Documentation', icon: 'documentation', affix: true } // } // ] // }, // { // path: '/guide', // component: Layout, // redirect: '/guide/index', // children: [ // { // path: 'index', // component: () =&gt; import('@/views/guide/index'), // name: 'Guide', // meta: { title: 'Guide', icon: 'guide', noCache: true } // } // ] // }, // { // path: '/profile', // component: Layout, // redirect: '/profile/index', // hidden: true, // children: [ // { // path: 'index', // component: () =&gt; import('@/views/profile/index'), // name: 'Profile', // meta: { title: 'Profile', icon: 'user', noCache: true } // } // ] // } ] /** * asyncRoutes * the routes that need to be dynamically loaded based on user roles */ export const asyncRoutes = [ /* { path: '/configuration', component: Layout, children: [ { path: 'index', component: () =&gt; import('@/views/configuration/index'), name: 'Configuration', meta: { title: '项目配置', icon: 'list', noCache: true } } ] },*/ { path: '/project', component: () =&gt; import('@/views/project/index'), meta: { title: '项目管理', icon: 'example' } }, { path: '/management', component: Layout, children: [ { path: 'index', component: () =&gt; import('@/views/management/index'), name: 'Management', meta: { title: '数据管理', icon: 'component', // noCache: true, roles: ['project_manager'] } } ] }, { path: '/objectives', component: Layout, children: [ { path: 'index', component: () =&gt; import('@/views/objectives/index'), name: 'Objectives', meta: { title: '项目目标', icon: 'star', // noCache: true roles: ['project_manager', 'manage_manager'] } } ] }, { path: '/panels', component: Layout, redirect: '/panels/report', name: 'Panels', alwaysShow: true, breadcrumb: false, meta: { title: '项目面板', icon: 'example' }, children: [ { name: 'Report', path: 'report', component: () =&gt; import('@/views/panels/index'), meta: { title: '经营月报', view: 'index', icon: 'list', noCache: true } }, { path: 'view_pl', component: () =&gt; import('@/views/subpage/page_pl'), name: 'PL', meta: { title: 'P&amp;L', icon: 'list', roles: ['admin', 'manage_manager', 'project_manager'], noCache: true } }, { path: 'view_capacity', component: () =&gt; import('@/views/subpage/page_cn'), name: 'Capacity', meta: { title: '产能', icon: 'list', noCache: true } }, { path: 'view_quality', component: () =&gt; import('@/views/subpage/page_zl'), name: 'Quality', meta: { title: '质量', icon: 'list', noCache: true } }, { path: 'view_personnel', component: () =&gt; import('@/views/subpage/page_ry'), name: 'Personnel', meta: { title: '人员', icon: 'list', noCache: true } }, { path: 'view/:id(\\\\S+)', component: () =&gt; import('@/views/panels/view'), name: 'panelView', meta: { title: '月度经营分析', // noCache: true, activeMenu: '/panels/list' }, hidden: true }, { path: 'list', component: () =&gt; import('@/views/panels/list'), name: 'panelsLst', hidden: true, meta: { title: '经营月报(旧)', icon: 'list' } } ] }, /* { path: '/permission', component: Layout, children: [ { path: 'index', component: () =&gt; import('@/views/permission/role'), name: 'management2', meta: { title: '权限管理', icon: 'component', noCache: true } } ] }, */ { path: '/view-manage', // hidden: true, component: Layout, redirect: '/view-manage/list', name: 'ViewManage\\'', // hidden: true, meta: { title: '视图管理', icon: 'example' }, children: [ { path: 'list', // hidden: true, component: () =&gt; import('@/views/view-manage/list'), name: 'ViewList2', meta: { title: 'view List', icon: 'list' } }, { path: 'create', hidden: true, component: () =&gt; import('@/views/view-manage/create'), name: 'CreateView', meta: { title: 'Create view', icon: 'edit' } }, { path: 'edit/:id(\\\\d+)', hidden: true, component: () =&gt; import('@/views/view-manage/edit'), name: 'EditView', meta: { title: 'Edit view', noCache: true, activeMenu: '/view-manage/list' } } /* { path: 'dev', component: () =&gt; import('@/views/panels/components/charts/dev'), name: 'ArticleList3', meta: { title: 'dev', icon: 'bug' } }*/ ] }, /* { path: '/view-manage', // hidden: true, component: Layout, redirect: '/example/list', name: 'Example', // hidden: true, meta: { title: '视图管理', icon: 'example' }, children: [ { path: 'create', // hidden: true, component: () =&gt; import('@/views/example/create'), name: 'CreateArticle', meta: { title: 'Create Article', icon: 'edit' } }, { path: 'edit/:id(\\\\d+)', // hidden: true, component: () =&gt; import('@/views/example/edit'), name: 'EditArticle', meta: { title: 'Edit Article', noCache: true, activeMenu: '/example/list' } }, { path: 'list', // hidden: true, component: () =&gt; import('@/views/example/list'), name: 'ArticleList2', meta: { title: 'Article List', icon: 'list' } } /!* { path: 'dev', component: () =&gt; import('@/views/panels/components/charts/dev'), name: 'ArticleList3', meta: { title: 'dev', icon: 'bug' } }*!/ ] },*/ /* { path: '/permission', component: Layout, redirect: '/permission/page', alwaysShow: true, // will always show the root menu name: 'Permission', meta: { title: '权限管理', icon: 'lock', roles: ['admin', 'editor'] // you can set roles in root nav }, children: [ { path: 'page', component: () =&gt; import('@/views/permission/page'), name: 'PagePermission', meta: { title: 'Page Permission', roles: ['admin'] // or you can only set roles in sub nav } }, { path: 'directive', component: () =&gt; import('@/views/permission/directive'), name: 'DirectivePermission', meta: { title: 'Directive Permission' // if do not set roles, means: this page does not require permission } }, { path: 'role', component: () =&gt; import('@/views/permission/role'), name: 'RolePermission', meta: { title: '角色&amp;权限' } } ] },*/ // { // path: '/icon', // component: Layout, // children: [ // { // path: 'index', // component: () =&gt; import('@/views/table/complex-table'), // name: 'Icons', // meta: { title: 'icon', icon: 'icon', noCache: true } // } // ] // }, /** when your routing map is too long, you can split it into small modules **/ // componentsRouter, // chartsRouter, // nestedRouter, // tableRouter, // { // path: '/tab', // component: Layout, // children: [ // { // path: 'index', // component: () =&gt; import('@/views/tab/index'), // name: 'Tab', // meta: { title: 'Tab', icon: 'tab' } // } // ] // }, // { // path: '/error', // component: Layout, // redirect: 'noRedirect', // name: 'ErrorPages', // meta: { // title: 'Error Pages', // icon: '404' // }, // children: [ // { // path: '401', // component: () =&gt; import('@/views/error-page/401'), // name: 'Page401', // meta: { title: '401', noCache: true } // }, // { // path: '404', // component: () =&gt; import('@/views/error-page/404'), // name: 'Page404', // meta: { title: '404', noCache: true } // } // ] // }, // { // path: '/error-log', // component: Layout, // children: [ // { // path: 'log', // component: () =&gt; import('@/views/error-log/index'), // name: 'ErrorLog', // meta: { title: 'Error Log', icon: 'bug' } // } // ] // }, // { // path: '/excel', // component: Layout, // redirect: '/excel/export-excel', // name: 'Excel', // meta: { // title: 'Excel', // icon: 'excel' // }, // children: [ // { // path: 'export-excel', // component: () =&gt; import('@/views/excel/export-excel'), // name: 'ExportExcel', // meta: { title: 'Export Excel' } // }, // { // path: 'export-selected-excel', // component: () =&gt; import('@/views/excel/select-excel'), // name: 'SelectExcel', // meta: { title: 'Export Selected' } // }, // { // path: 'export-merge-header', // component: () =&gt; import('@/views/excel/merge-header'), // name: 'MergeHeader', // meta: { title: 'Merge Header' } // }, // { // path: 'upload-excel', // component: () =&gt; import('@/views/excel/upload-excel'), // name: 'UploadExcel', // meta: { title: 'Upload Excel' } // } // ] // }, // { // path: '/zip', // component: Layout, // redirect: '/zip/download', // alwaysShow: true, // name: 'Zip', // meta: { title: 'Zip', icon: 'zip' }, // children: [ // { // path: 'download', // component: () =&gt; import('@/views/zip/index'), // name: 'ExportZip', // meta: { title: 'Export Zip' } // } // ] // }, // { // path: '/pdf', // component: Layout, // redirect: '/pdf/index', // children: [ // { // path: 'index', // component: () =&gt; import('@/views/pdf/index'), // name: 'PDF', // meta: { title: 'PDF', icon: 'pdf' } // } // ] // }, // { // path: '/pdf/download', // component: () =&gt; import('@/views/pdf/download'), // hidden: true // }, // { // path: '/theme', // component: Layout, // children: [ // { // path: 'index', // component: () =&gt; import('@/views/theme/index'), // name: 'Theme', // meta: { title: 'Theme', icon: 'theme' } // } // ] // }, // { // path: '/clipboard', // component: Layout, // children: [ // { // path: 'index', // component: () =&gt; import('@/views/clipboard/index'), // name: 'ClipboardDemo', // meta: { title: 'Clipboard', icon: 'clipboard' } // } // ] // }, // 404 page must be placed at the end !!! { path: '*', redirect: '/404', hidden: true } ] const createRouter = () =&gt; new Router({ // mode: 'history', // require service support scrollBehavior: () =&gt; ({ y: 0 }), routes: constantRoutes }) const router = createRouter() // Detail see: https://github.com/vuejs/vue-router/issues/1234#issuecomment-357941465 export function resetRouter() { const newRouter = createRouter() router.matcher = newRouter.matcher // reset router } export default router × Search results Close "},"filters_index.js.html":{"id":"filters_index.js.html","title":"Source: filters/index.js","body":" Common Modules Global addClassasyncRoutesbyteLengthcardSortcheckSubjectcleanArrayconstantRoutescreateUniqueStringdataTypedebouncedeepClonedoResizefilterAsyncRoutesformatTimegetFullDatagetQueryObjectgetTimehasClasshasPermissionhtml2TextisArrayisExternalisStringmovenumberFormatterobjectMergeparamparam2ObjparseTimepluralizeremoveClassscrollTosorttimeAgotoggleClasstoThousandFilteruniqueuniqueArruppercaseFirstvalidAlphabetsvalidEmailvalidLowerCasevalidUpperCasevalidURLvalidUsernamewashValue Source: filters/index.js // import parseTime, formatTime and set to filter export { parseTime, formatTime } from '@/utils' /** * Show plural label if time is plural number * @return {string} * @param value * @param type */ export function dataType(value, type, item) { value = parseFloat(value) || value switch (type) { case 'Duration': value = value &amp;&amp; (value * 1440).toFixed(2) break case 'Currency': try { value = value &amp;&amp; value.toFixed(2) } catch (e) { console.log(e) console.log(value) } break case 'Double': // value = value &amp;&amp; value.toFixed(2) break case 'Integer': value = value &amp;&amp; Math.round(value) break case 'Percentage': // console.log('Percentage..', item) value = value &amp;&amp; value + '%' break case 'String': // console.log('String:', value) value = (value === 0) ? ' ' : value break default: } return value } /** * Show plural label if time is plural number * @param {number} time * @param {string} label * @return {string} */ function pluralize(time, label) { if (time === 1) { return time + label } return time + label + 's' } /** * @param {number} time */ export function timeAgo(time) { const between = Date.now() / 1000 - Number(time) if (between &lt; 3600) { return pluralize(~~(between / 60), ' minute') } else if (between &lt; 86400) { return pluralize(~~(between / 3600), ' hour') } else { return pluralize(~~(between / 86400), ' day') } } /** * Number formatting * like 10000 =&gt; 10k * @param {number} num * @param {number} digits */ export function numberFormatter(num, digits) { const si = [ { value: 1E18, symbol: 'E' }, { value: 1E15, symbol: 'P' }, { value: 1E12, symbol: 'T' }, { value: 1E9, symbol: 'G' }, { value: 1E6, symbol: 'M' }, { value: 1E3, symbol: 'k' } ] for (let i = 0; i &lt; si.length; i++) { if (num &gt;= si[i].value) { return (num / si[i].value).toFixed(digits).replace(/\\.0+$|(\\.[0-9]*[1-9])0+$/, '$1') + si[i].symbol } } return num.toString() } /** * 10000 =&gt; \"10,000\" * @param {number} num */ export function toThousandFilter(num) { return (+num || 0).toString().replace(/^-?\\d+/g, m =&gt; m.replace(/(?=(?!\\b)(\\d{3})+$)/g, ',')) } /** * Upper case first char * @param {String} string */ export function uppercaseFirst(string) { return string.charAt(0).toUpperCase() + string.slice(1) } × Search results Close "},"directive_el-table_adaptive.js.html":{"id":"directive_el-table_adaptive.js.html","title":"Source: directive/el-table/adaptive.js","body":" Common Modules Global addClassasyncRoutesbyteLengthcardSortcheckSubjectcleanArrayconstantRoutescreateUniqueStringdataTypedebouncedeepClonedoResizefilterAsyncRoutesformatTimegetFullDatagetQueryObjectgetTimehasClasshasPermissionhtml2TextisArrayisExternalisStringmovenumberFormatterobjectMergeparamparam2ObjparseTimepluralizeremoveClassscrollTosorttimeAgotoggleClasstoThousandFilteruniqueuniqueArruppercaseFirstvalidAlphabetsvalidEmailvalidLowerCasevalidUpperCasevalidURLvalidUsernamewashValue Source: directive/el-table/adaptive.js import { addResizeListener, removeResizeListener } from 'element-ui/src/utils/resize-event' /** * How to use * &lt;el-table height=\"100px\" v-el-height-adaptive-table=\"{bottomOffset: 30}\"&gt;...&lt;/el-table&gt; * el-table height is must be set * bottomOffset: 30(default) // The height of the table from the bottom of the page. */ const doResize = (el, binding, vnode) =&gt; { const { componentInstance: $table } = vnode const { value } = binding if (!$table.height) { throw new Error(`el-$table must set the height. Such as height='100px'`) } const bottomOffset = (value &amp;&amp; value.bottomOffset) || 30 if (!$table) return const height = window.innerHeight - el.getBoundingClientRect().top - bottomOffset $table.layout.setHeight(height) $table.doLayout() } export default { bind(el, binding, vnode) { el.resizeListener = () =&gt; { doResize(el, binding, vnode) } // parameter 1 is must be \"Element\" type addResizeListener(window.document.body, el.resizeListener) }, inserted(el, binding, vnode) { doResize(el, binding, vnode) }, unbind(el) { removeResizeListener(window.document.body, el.resizeListener) } } × Search results Close "},"store_modules_permission.js.html":{"id":"store_modules_permission.js.html","title":"Source: store/modules/permission.js","body":" Common Modules Global addClassasyncRoutesbyteLengthcardSortcheckSubjectcleanArrayconstantRoutescreateUniqueStringdataTypedebouncedeepClonedoResizefilterAsyncRoutesformatTimegetFullDatagetQueryObjectgetTimehasClasshasPermissionhtml2TextisArrayisExternalisStringmovenumberFormatterobjectMergeparamparam2ObjparseTimepluralizeremoveClassscrollTosorttimeAgotoggleClasstoThousandFilteruniqueuniqueArruppercaseFirstvalidAlphabetsvalidEmailvalidLowerCasevalidUpperCasevalidURLvalidUsernamewashValue Source: store/modules/permission.js import { asyncRoutes, constantRoutes } from '@/router' /** * Use meta.role to determine if the current user has permission * @param roles * @param route */ function hasPermission(roles, route) { if (route.meta &amp;&amp; route.meta.roles) { return roles.some(role =&gt; route.meta.roles.includes(role)) } else { return true } } /** * Filter asynchronous routing tables by recursion * @param routes asyncRoutes * @param roles */ export function filterAsyncRoutes(routes, roles) { const res = [] routes.forEach(route =&gt; { const tmp = { ...route } if (hasPermission(roles, tmp)) { if (tmp.children) { tmp.children = filterAsyncRoutes(tmp.children, roles) } res.push(tmp) } }) return res } const state = { routes: [], addRoutes: [] } const mutations = { SET_ROUTES: (state, routes) =&gt; { state.addRoutes = routes state.routes = constantRoutes.concat(routes) } } const actions = { generateRoutes({ commit }, roles) { return new Promise(resolve =&gt; { let accessedRoutes if (roles.includes('admin')) { accessedRoutes = asyncRoutes || [] } else { accessedRoutes = filterAsyncRoutes(asyncRoutes, roles) } commit('SET_ROUTES', accessedRoutes) resolve(accessedRoutes) }) } } export default { namespaced: true, state, mutations, actions } × Search results Close "},"utils_dataProce.js.html":{"id":"utils_dataProce.js.html","title":"Source: utils/dataProce.js","body":" Common Modules Global addClassasyncRoutesbyteLengthcardSortcheckSubjectcleanArrayconstantRoutescreateUniqueStringdataTypedebouncedeepClonedoResizefilterAsyncRoutesformatTimegetFullDatagetQueryObjectgetTimehasClasshasPermissionhtml2TextisArrayisExternalisStringmovenumberFormatterobjectMergeparamparam2ObjparseTimepluralizeremoveClassscrollTosorttimeAgotoggleClasstoThousandFilteruniqueuniqueArruppercaseFirstvalidAlphabetsvalidEmailvalidLowerCasevalidUpperCasevalidURLvalidUsernamewashValue Source: utils/dataProce.js // eslint-disable-next-line no-unused-vars import { deepClone, objectMerge, sort, unique, washValue } from '@/utils' import store from '@/store' import { fetchData } from '@/api/panel' // import { dataType } from '@/filters' import uuidv1 from 'uuid/v1' /** * 主要数据处理过程 * @returns {*} * @param params */ export async function getFullData(params) { // eslint-disable-next-line no-unused-vars const keyColumn = 'vf_id0' let res = {} // 返回数据 /** * params 请求参数信息 该视图的配置信息 * drill__drillName * drill_drillName * drill_parameters */ const data = { // 请求参数 vf_id: undefined, dir: store.state.user.api_dir + params.drill__drillName, name: params.drill_drillName, year: +params.drill_parameters.year, month: +params.drill_parameters.month, ...store.state.user.apiTemplate } // console.log('data:', data) // 实际 data.vf_id = 0 res = await getData(data, res) // return res.vf_id0 // console.log('res.vf_id0:', res) // 预计 if (params.compare) { data.vf_id = 1 res = await getData(data, res) // return res.vf_id1 } // 占比 if (params.ratio) { // 实际 占比 data.vf_id = 2 res = await getData(data, res) // return res.vf_id2 // 预计 占比 if (params.compare) { data.vf_id = 3 res = await getData(data, res) // return res.vf_id3 } } // 根据view视图配置，发出请求 console.log( 'title:', params.title, 'name:', params.name, 'compare:', params.compare, 'completion:', params.completion, 'ratio:', params.ratio, 'fold:', params.fold, 'sort:', params.sort, 'params:', params ) console.log('res:', res) // 数组长度统一,格式 res = standardize(res) // 转换成数字 // res = valueToNumber(res) // 计算完成率 if (params.compare &amp;&amp; params.completion) { res = calcCompletion(res) } // 计算高亮 if (params.compare &amp;&amp; params.completion) { res = calcHighlight(res) } res.currentView = params // 集成整合 const chartDate = integration(res) const tableDate = integration(res) // 处理表格折叠行 const foldTableDate = planeToHierarchy(tableDate) // const foldTableDate = [] // const foldTableDate = planeToHierarchy(res) return { chartDate: chartDate, tableDate: tableDate, foldTableDate: foldTableDate, res: res // tableDate: standardize(res) } } // toooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooools // 集成整合 function integration(data) { // const views = store.state.options.views const tableDate = [] // console.log('data.currentView:', data.currentView) data.vf_id0.forEach((item, index) =&gt; { tableDate.push({ id: uuidv1(), name: item.name, type: item.type, title: item.title, index: item.index, chartId: uuidv1(), formula: item.formula, original: item.original, children: item.children, breadName: item.title, highlight: item.highlight, highlightStyle: item.highlightStyle, isDrill: !!data.currentView.items[item.name], drillName: item.name, _drillName: data.currentView.items[item.name] || data.currentView.items['*'], res_s_title: item.title, res_s_value: data.vf_id0 &amp;&amp; data.vf_id0[index].value, res_y_value: data.vf_id1 &amp;&amp; data.vf_id1[index].value, res_s_zb_value: data.vf_id2 &amp;&amp; data.vf_id2[index].value, res_y_zb_value: data.vf_id3 &amp;&amp; data.vf_id3[index].value, res_finish_rate_value: item.finish_rate }) // console.log('data.vf_id2[index].value:', data.vf_id2[index].value) }) return tableDate } async function getData(data, res) { res['vf_id' + data.vf_id] = await fetchData(data) return res } // 计算高亮 export function calcHighlight(data) { data.vf_id0.forEach((item, index) =&gt; { // console.log('item.highlight:', item.highlight) item.highlightStyle = '' if (item.highlight === 'true') { item.highlightStyle = item.value &lt; data.vf_id1[index].value ? 'danger' : '' } if (item.highlight === 'false') { item.highlightStyle = item.value &gt; data.vf_id1[index].value ? 'danger' : '' } // console.log(item.value, typeof item.value, data.vf_id1[index].value, typeof data.vf_id1[index].value) // console.log(item.title, item.highlightStyle) }) return data } // 计算完成率 export function calcCompletion(data) { // console.log(data) data.finish_rate = [] data.vf_id0.forEach((item, index) =&gt; { // console.log(item) let _rate = (item.value / data.vf_id1[index].value * 100).toFixed(2) _rate = washValue(_rate) item.finish_rate = _rate data.finish_rate.push({ name: item.name, title: item.title, value: _rate }) }) return data } // 转换成数字 export function valueToNumber(data) { return data } // 拉齐长度，填平空位 export function standardize(data) { // data.res_s_zb.unshift({ name: '123', title: 'zbzb', value: 100 }) // data.res_y_zb.unshift({ name: '456', title: '撒旦发', value: 200 }) // console.log('data.vf_id2', data.vf_id2) data.vf_id2.forEach(item =&gt; { // console.log(item.title, item.value) }) let index = 1 let _titles = [] let _temp = data.vf_id0 // 参考标准（实际） if (data.vf_id0.length &lt;= 0) { // 如果没有实际数据，以目标数据为准排序 _temp = data.vf_id1 } // console.log('data:', data) // console.log('data.vf_id0:', data.vf_id0) // console.log('data.vf_id1:', data.vf_id1) // console.log('_temp:', _temp) // 取得所有类目 _titles = [..._temp.map(item =&gt; { return { name: item.name, title: item.title, value: undefined, // 空值填充 默认值 index: index++ // } })] _titles = unique(_titles) // 去重 Object.keys(data).forEach((key) =&gt; { // 统一 _titles.forEach(item =&gt; { // item.name类目名称 // data[key] =&gt; data.vf_id0 data.vf_id1 data.vf_id2 data.vf_id3 ... const v = data[key].find(item2 =&gt; item2.name === item.name) if (!v) { data[key].push(item) // 填补空缺 } else { v.index = item.index // 统一索引 } }) data[key] = sort(data[key]) // 重新排序 确保各维度位置正确必须步骤 }) // Currency 金额、 Integer 整数、 Percentage 百分比、 Duration 时间 Object.keys(data).forEach((key) =&gt; { // 统一 data[key].forEach(item =&gt; { item.original = item.value if (item.value === 'Null') { console.log('error_item', item) } item.value = item.value === 'Null' ? undefined : item.value switch (item.type) { case 'Duration': item.value = item.value &amp;&amp; (item.value * 1440).toFixed(2) break case 'Currency': try { item.value = item.value &amp;&amp; item.value.toFixed(2) } catch (e) { console.log(e) console.log(item) } break case 'Double': item.value = item.value &amp;&amp; item.value.toFixed(2) break case 'Integer': item.value = item.value &amp;&amp; Math.round(item.value) break case 'Percentage': item.value = item.value &amp;&amp; (item.value * 100).toFixed(2) break case 'String': item.value = (item.value === 'Null') ? ' ' : item.value // console.log(item) break default: } item.value = parseFloat(item.value) || item.value // console.log(item.value, typeof item.value, item.type) item.formula = item.formula === 'Null' ? undefined : item.formula // item.highlight = item.highlight === 'true' ? true : item.highlight // item.highlight = item.highlight === 'false' ? false : item.highlight // item.highlight = item.highlight === 'Null' ? undefined : item.highlight // console.log('item.highlight:', item.highlight, typeof item.highlight) }) }) return data } // 数据层级折叠 export function planeToHierarchy(arr) { // 1.标记父级，从而可以从高级向低级组织结构 arr = deepClone(arr) const resArr = [] // console.log('planeToHierarchy...') // console.log(arr) // 初始化准备 arr = arr.map(item =&gt; { // console.log('item:', item) // console.log(item.breadName, item.children) if (item.children) { item.children = item.children === 'Null' ? '[]' : item.children item.children = JSON.parse(item.children) // fixJson 字符串 =&gt;&gt;变数组 } else { item.children = [] } item.childrenRow = [] // 默认无子元素 item.parent = undefined // 默认父级未定义 return item }) // 标记父级 arr.forEach(item =&gt; { if (item.children.length !== 0) { // 有下级元素 // console.log(\"item.name:\", item.name) // console.log(\"item.children:\", item.children) item.children.forEach(childrenName =&gt; { const childrenItem = arr.find(arrItem =&gt; arrItem.name === childrenName) if (childrenItem) { childrenItem.parent = item.name } }) } }) // arr.forEach(item =&gt; { if (!item.parent) { resArr.push(item) if (item.children.length &gt; 0) { findChildren(item, arr) } } }) // console.log('-----------------------------------------------------') // console.log('arr:', arr) return resArr } // tooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooools // 递归子元素 // const n = 1 function findChildren(parent, arr) { parent.children.forEach(childrenName =&gt; { const childrenItem = arr.find(arrItem =&gt; arrItem.name === childrenName) if (childrenItem) { parent.childrenRow.push(childrenItem) if (childrenItem.children.length &gt; 0) { // console.log(childrenItem.children) findChildren(childrenItem, arr) } } }) } × Search results Close "},"utils_dataProce_v1.js.html":{"id":"utils_dataProce_v1.js.html","title":"Source: utils/dataProce_v1.js","body":" Common Modules Global addClassasyncRoutesbyteLengthcardSortcheckSubjectcleanArrayconstantRoutescreateUniqueStringdataTypedebouncedeepClonedoResizefilterAsyncRoutesformatTimegetFullDatagetQueryObjectgetTimehasClasshasPermissionhtml2TextisArrayisExternalisStringmovenumberFormatterobjectMergeparamparam2ObjparseTimepluralizeremoveClassscrollTosorttimeAgotoggleClasstoThousandFilteruniqueuniqueArruppercaseFirstvalidAlphabetsvalidEmailvalidLowerCasevalidUpperCasevalidURLvalidUsernamewashValue Source: utils/dataProce_v1.js // eslint-disable-next-line no-unused-vars import { deepClone, parseTime, sort, unique, washValue } from '@/utils' import store from '@/store' import { fetchData } from '@/api/panel' // import { dataType } from '@/filters' // import uuidv1 from 'uuid/v1' /** * 主要数据处理过程 * @returns {*} * @param params */ export async function getFullData(params) { // eslint-disable-next-line no-unused-vars const keyColumn = 'vf_id0' let res = {} // 返回数据 let day_s = 86400000 * 29 // const day30_s = 86400000 * 30 const week_s = 3628800000 - 86400000 let month_s = 15552000000 if (params.config.component.type === 'chart_bar') { day_s = 86400000 // week_s = 604800000 if (parseTime(params.query.date, '{m}') === '03') { month_s = 2505600000 } else { month_s = 2592000000 } } /** * params 请求参数信息 该视图的配置信息 * drill__drillName * drill_drillName * drill_parameters */ // console.log('params:', params) // console.log('params.query.type:', params.query.type) // console.log('params.query.type:', params.query.type) let subject = params.items[`${params.query.type}`] // console.log('subject:', subject) if (!subject) { // todo 降级参数 subject = params.items['*'] || [''] } // console.log('subject:', subject) const viewSubject = subject.map(item =&gt; { let _title = '' const _v = store.state.options.subject.find(s =&gt; { return s.name === item }) // console.log('_v:', _v) // console.log('_v:', JSON.parse(_v.config)) if (_v) { _title = _v.config.show_name || _v.title } return { name: item, title: _title } }) // console.log('viewSubject:', viewSubject) // console.log('subject:', subject) const data = { // 请求参数 vf_id: undefined, dir: 'Sample Reports/query', dateType: params.query.dateType, start: '', // 起始日期（如果是日粒度，就是时间选框日期减去30天，如果是周，就是前推6周的周一的日期（注意，还是日期，不过日期是前推6周的周一，需要计算一下），如果是月，就是6个月前的YYYYmm，如201909） end: '', // 结束日期（如果是日粒度，就是时间选框日期，如果是周，就是所选日期的礼拜天的日期，如果是月，就是所选日期的当前月） dimension: [], // 查询的切片，json数组，里面每项就是一个查询条件。如:[{\"v_company\": \"永基\",\"v_id\":\"1561\"},{\"v_group_name\":\"李红英\"},{\"v_phase\":\"实习期\",\"v_group_name\":\"李红英\"}]，分别查询人员id为1561的员工，小组名称为\"李红英\"的小组，以及小组名称为\"李红英\"的小组里面阶段为\"实习期\"的信息，并且把这三种不同维度信息一并给查询出来。 subject: subject, // 查询的科目，json数组，里面每项就是一个科目。如:[\"income\",\"AHT\"] table: 'statistics', // 查询的是目标还是实际，默认不填写，就是实际，查询目标需要填写成 target // year: +params.drill_parameters.year, // month: +params.drill_parameters.month, ...store.state.user.apiTemplate } // console.log('params.query.group:', params) // console.log('params.query.group:', params) // console.log('params.query.group:', params.query) // console.log('params.query.group:', params.query.group) // 处理组、人员参数 // console.log('params.query.group:', params.query.group) const __arr = store.state.group.employeeList // console.log('__arr=&gt;', __arr) // console.log('params.query.group:', params.query.group) if (params.query.group === 'null' || params.query.group.length === 0) { // 空选项 data.dimension.push({}) // console.log('params.query:', params.query) if (params.config.component.type === 'table_lirun') { __arr.forEach((item) =&gt; { data.dimension.push({ v_group_name: item.value }) item.children.forEach((_item) =&gt; { const __obj = {} __obj.v_id = _item.v_project_work_id data.dimension.push(__obj) }) }) } } else if (params.query.multiple) { // console.log('params.query.multiple:', params.query.multiple) // 多选 // console.log('params.query.group:', params.query.group) params.query.group.forEach(item =&gt; { // console.log('params.query.group:', params.query.group) switch (item.length) { case 1: data.dimension.push({ v_company: item[0] }) break case 2: data.dimension.push({ v_group_name: item[1] }) break case 3: data.dimension.push({ v_id: item[2].toString() }) break } }) } else { // console.log('params.query.group:', params.query.group) // 单选 if (params.config.component.type === 'table_lirun') { // console.log('params.query.group:', params.query.group) data.dimension.push({ v_group_name: params.query.group[0] }) if (params.query.group.length === 1) { // console.log('__arr', __arr) __arr.forEach((item) =&gt; { if (item.value === params.query.group[0]) { item.children.forEach((_item) =&gt; { const __obj = {} __obj.v_id = _item.v_project_work_id data.dimension.push(__obj) }) } }) } else { data.dimension.push({ v_id: params.query.group[1].toString() }) } } else { // console.log('params.query.group:', params.query.group) switch (params.query.group.length) { case 1: data.dimension.push({ v_company: params.query.group[0] }) break case 2: data.dimension.push({ v_group_name: params.query.group[1] }) break case 3: data.dimension.push({ v_id: params.query.group[2].toString() }) break } } } if (params.query.dateType === 'daily') { // console.log('按天查。。。', params.query) const _data = parseTime(params.query.date, '{y}{m}{d}') // 天毫秒数 604800000 = 1000 × 60 × 60 × 24 × 7 // const day_s = 604800000 const _data_start = parseTime(params.query.date.getTime() - day_s, '{y}{m}{d}') data.vf_id = 0 data.start = _data_start data.end = _data } // 处理日期参数 if (params.query.dateType === 'week') { // console.log('按周查。。。', params.query) // 周毫秒数 3628800000 = 1000 × 60 × 60 × 24 × 42 // const week_s = 3628800000 const _data_start = parseTime(params.query.date.getTime() - week_s, '{y}{m}{d}') const _data_end = parseTime(params.query.date, '{y}{m}{d}') data.vf_id = 1 data.start = _data_start data.end = _data_end // res = await getData(data, res) // return res.vf_id0 } if (params.query.dateType === 'month') { // console.log('按月查。。。', data) // 月毫秒数 15552000000 = 1000 × 60 × 60 × 24 × 180 // const month_s = 15552000000 const _data_start = parseTime(params.query.date.getTime() - month_s, '{y}{m}') const _data_end = parseTime(params.query.date, '{y}{m}') data.vf_id = 2 if (params.config.component.type === 'table' || params.config.component.type === 'table_lirun') { data.start = _data_end } else { data.start = _data_start } data.end = _data_end // res = await getData(data, res) // return res.vf_id0 } if (params.query.dateType === 'year') { console.log('按年查。。。', data) data.start = parseTime(params.query.date, '{y}') data.end = parseTime(params.query.date, '{y}') data.vf_id = 3 // res = await getData(data, res) // return res.vf_id0 } // todo mock数据 // data = { // 请求参数 // vf_id: undefined, // dir: 'Sample Reports/query', // start: '20200114', // 起始日期（如果是日粒度，就是时间选框日期减去30天，如果是周，就是前推6周的周一的日期（注意，还是日期，不过日期是前推6周的周一，需要计算一下），如果是月，就是6个月前的YYYYmm，如201909） // end: '20200120', // // dimension: [{ 'v_id': '21' }, { 'v_group_name': '李昊' }, { 'v_phase': '正式', 'v_group_name': '李昊' }], // dimension: [{ 'v_group_name': '李昊' }], // subject: ['use_ratio'], // table: '', // 查询的是目标还是实际，默认不填写，就是实际，查询目标需要填写成 target // ...store.state.user.apiTemplate // } // data.start = 202002 // data.end = 202002 switch (params.query.dateType) { case 'daily': data.vf_id = 0 break case 'week': data.vf_id = 1 break case 'month': data.vf_id = 2 break case 'year': data.vf_id = 3 break } // console.log('data:', data) // 实际数据 res = await getData(data, res, 'actual') // return res.vf_id0 // 目标数据 if (params.config.compare) { data.table = 'target' // console.log('target', await getData(data, res, 'target')) res = await getData(data, res, 'target') // return res.vf_id0 } // 根据view视图配置，发出请求 // console.log( // 'title:', params.title, // 'name:', params.name, // 'compare:', params.compare, // 'completion:', params.completion, // 'ratio:', params.ratio, // 'fold:', params.fold, // 'sort:', params.sort, // 'params:', params // ) // console.log('res:', res) // 数组长度统一,格式 res = standardize(res, params) // 排序 res = resSort(res, viewSubject) // 转换成数字 // res = valueToNumber(res) params.compare = true // todo debug params.completion = true // todo debug // 计算完成率 if (params.config.completion) { res = calcCompletion(res) } // 计算高亮 if (params.config.completion) { res = calcHighlight(res) } // 集成整合 const chartDate = formatDataSet(params.query.dateType, res) const tableDate = integration(res) // 处理表格折叠行 const foldTableDate = planeToHierarchy(params.query, tableDate) // const foldTableDate = [] // console.log('res=&gt;',res) return { chartDate: chartDate, tableDate: foldTableDate, // foldTableDate: foldTableDate, res: res // tableDate: standardize(res) } } // toooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooools // 集成整合 function integration(data) { // console.log(data) return data } function formatDataSet(dateType, data) { // if (dateType === 'week') { // if (data[0]['dimension'][0]['data']) { // // } // } return { data } } async function getData(data, res, key) { res[key] = await fetchData(data) return res } // 计算高亮 export function calcHighlight(data) { // console.log('data:', data) data.forEach(subject =&gt; { subject.dimension.forEach(dimension =&gt; { dimension.data.forEach(item =&gt; { // console.log('item.highlight:', item.highlight) item.highlightStyle = '' if (item.targetValue) { if (item.highlight === 'true') { item.highlightStyle = item.actualValue &lt; item.targetValue ? 'danger' : 'blue' } if (item.highlight === 'false') { item.highlightStyle = item.actualValue &gt; item.targetValue ? 'danger' : 'blue' } } // todo // item.highlightStyle = 'danger' }) }) }) return data } // 计算完成率 export function calcCompletion(data) { data.forEach(subject =&gt; { subject.dimension.forEach(group =&gt; { // console.log(data) group.data.forEach(item =&gt; { // console.log('item:', item) let _rate = (item.actualValue / item.targetValue * 100).toFixed(2) _rate = washValue(_rate) item.finish_rate = _rate }) }) }) // console.log(data) // data.finish_rate = [] // data.actual.forEach((item, index) =&gt; { // // console.log(item) // let _rate = (item.value / data.target[index].value * 100).toFixed(2) // _rate = washValue(_rate) // item.finish_rate = _rate // data.finish_rate.push({ // name: item.name, // title: item.title, // value: _rate // }) // }) return data } // 转换成数字 export function valueToNumber(data) { return data } // 科目排序 export function resSort(data, viewSubject) { viewSubject.map(item =&gt; { item.dimension = [] const _v = data.find(s =&gt; s.name === item.name) // console.log('_v:', _v) if (_v) { // console.log('_v:', _v.dimension[0].data[0].type) item.index = _v.index item.type = _v.dimension[0].data[0].type item.dimension = _v.dimension } }) // console.log('viewSubject:', viewSubject) // console.log('data:', data) return viewSubject } // 拉齐长度，填平空位 export function standardize(data, params) { data.actual.forEach(item =&gt; { // console.log(item.title, item.value) }) let index = 1 let resDate = [] // Currency 金额、 Integer 整数、 Percentage 百分比、 Duration 时间 Hour 小时 Second 秒 Time 分钟 7‘11” Object.keys(data).forEach((key) =&gt; { // 统一 data[key].forEach(item =&gt; { // console.log(item) item.unit = item.unit === 'Null' ? undefined : item.unit item.original = item.value item.value = item.value === 'Null' ? undefined : item.value // console.log('item.type:', item.type) switch (item.type) { case 'Duration': item.value = item.value &amp;&amp; (item.value * 1440).toFixed(2) break case 'Currency': item.value = item.value &amp;&amp; item.value.toFixed(2) break case 'Double': // item.value = item.value &amp;&amp; item.value.toFixed(2) break case 'Integer': item.value = item.value &amp;&amp; Math.round(item.value) break case 'Percentage': item.value = item.value &amp;&amp; (item.value * 100).toFixed(2) break case 'Hour': console.log('item:', item) item.value = item.value &amp;&amp; Math.round(item.value) break case 'Second': item.value = item.value &amp;&amp; Math.round(item.value * 60) break case 'Time': if (item.unit === '秒') { item.value = item.value &amp;&amp; Math.round(item.value * 3600) } if (item.unit === '小时') { item.value = item.value &amp;&amp; Math.round(item.value) } // // eslint-disable-next-line no-case-declarations // const _minute = parseInt(item.value / 60) // // eslint-disable-next-line no-case-declarations // const _second = parseInt(item.value % 60) // item.value = `${_minute}'${_second}\"` // item.timeValue = `${_minute}'${_second}\"` // console.log('Time:', item) break case 'String': item.value = (item.value === 'Null') ? ' ' : item.value // console.log(item) break default: } item.value = parseFloat(item.value) || item.value if (item.type === 'Time') { // item.value = item.timeValue // console.log('Time:', item) } // console.log(item.value, typeof item.value, item.type) item.formula = item.formula === 'Null' ? undefined : item.formula item.dimension = JSON.parse(item.dimension) }) }) data.actual.forEach(item =&gt; { // console.log(item) const _v = resDate.find(subject =&gt; subject.name === item.name) if (!_v) { resDate.push({ name: item.name, title: item.title, index: index++, dimension: [] }) } }) resDate = unique(resDate) // 去重 // console.log('resDate:', resDate) resDate.forEach(item =&gt; { // item.name 类目名称 // data.actual.forEach =&gt;... // 添加实际数据 // console.log('item:', item) data.actual.forEach(a =&gt; { if (item.title === a.title) { // if (a.type === 'Time') { // a.value = a.timeValue // } // item.type = a.type const _data = { actualValue: a.value, timeValue: a.timeValue, highlight: a.highlight, time: translateTime(a.time, params), type: a.type, formula: a.formula, original: a.original, unit: a.unit, children: a.children, v_id: a.dimension.v_id } // console.log(a.dimension.v_group_name) const _v = item.dimension.find(dimension =&gt; dimension.v_group_name === a.dimension.v_group_name) // console.log('_v', _v) if (!_v) { // item.type = a.type // todo item.dimension.push({ // 创建维度并添加数据 v_group_name: a.dimension.v_group_name, data: [_data] }) } else { // 添加数据 _v.data.push(_data) } } }) // console.log('data:', data) // 添加目标数据 if (data.target) { data.target.forEach(a =&gt; { if (item.title === a.title) { // console.log('a.title:', a.title) // console.log('a:', a) const _data = { // actualValue: a.value, // todo targetValue: a.value, time: a.time, type: a.type, formula: a.formula, original: a.original, unit: a.unit, children: a.children } // console.log('_data:', _data) const _v = item.dimension.find(dimension =&gt; dimension.v_group_name === a.dimension.v_group_name) // console.log('_v:', _v) const _v2 = _v.data.find(data =&gt; data.time === a.time) // console.log('_v2:', _v2) if (!_v2) { _v.data.push(_data) } else { _v2.targetValue = a.value } } }) } }) // console.log('resDate:', resDate) return resDate } // 数据层级折叠 export function planeToHierarchy(_query, arr) { // 1.标记父级，从而可以从高级向低级组织结构 arr = deepClone(arr) const resArr = [] let _date // console.log('planeToHierarchy...') // console.log(arr) // 初始化准备 arr = arr.map(item =&gt; { if (item.children) { item.children = item.children === 'Null' ? '[]' : item.children } else { item.children = [] } switch (_query.dateType) { case 'daily': _date = parseTime(_query.date, '{y}{m}{d}') break case 'week': // _date = parseTime(_query.date,'{y}{m}{d}') break case 'month': _date = parseTime(_query.date, '{y}{m}') break case 'year': _date = parseTime(_query.date, '{y}{m}{d}') break } if (item.dimension[0]) { item.dimension[0].data.forEach(items =&gt; { if (items.time === parseInt(_date)) { item.children = JSON.parse(items.children) // fixJson 字符串 =&gt;&gt;变数组 } }) } item.childrenRow = [] // 默认无子元素 item.parent = undefined // 默认父级未定义 return item }) // 标记父级 arr.forEach(item =&gt; { if (item.children.length !== 0) { // 有下级元素 // console.log(\"item.name:\", item.name) // console.log(\"item.children:\", item.children) item.children.forEach(childrenName =&gt; { const childrenItem = arr.find(arrItem =&gt; arrItem.name === childrenName) if (childrenItem) { childrenItem.parent = item.name } }) } }) // arr.forEach(item =&gt; { if (!item.parent) { resArr.push(item) if (item.children.length &gt; 0) { findChildren(item, arr) } } }) // console.log('-----------------------------------------------------') // console.log('arr:', arr) return resArr } // tooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooools // 递归子元素 // const n = 1 function findChildren(parent, arr) { parent.children.forEach(childrenName =&gt; { const childrenItem = arr.find(arrItem =&gt; arrItem.name === childrenName) if (childrenItem) { parent.childrenRow.push(childrenItem) if (childrenItem.children.length &gt; 0) { // console.log(childrenItem.children) findChildren(childrenItem, arr) } } }) } function translateTime(time, params) { let res = time const day_s = 86400000 const week_s = day_s * 7 const _time_start = params.query.date.getTime() - week_s * (7 - time) + day_s const _time_end = params.query.date.getTime() - week_s * (6 - time) switch (params.query.dateType) { case 'week': res = parseTime(_time_start, '{mm}.{d}') + '-' + parseTime(_time_end, '{m}.{d}') break case 'day': break case 'month': break } return res } × Search results Close "},"utils_validate.js.html":{"id":"utils_validate.js.html","title":"Source: utils/validate.js","body":" Common Modules Global addClassasyncRoutesbyteLengthcardSortcheckSubjectcleanArrayconstantRoutescreateUniqueStringdataTypedebouncedeepClonedoResizefilterAsyncRoutesformatTimegetFullDatagetQueryObjectgetTimehasClasshasPermissionhtml2TextisArrayisExternalisStringmovenumberFormatterobjectMergeparamparam2ObjparseTimepluralizeremoveClassscrollTosorttimeAgotoggleClasstoThousandFilteruniqueuniqueArruppercaseFirstvalidAlphabetsvalidEmailvalidLowerCasevalidUpperCasevalidURLvalidUsernamewashValue Source: utils/validate.js /** * Created by PanJiaChen on 16/11/18. */ /** * @param {string} path * @returns {Boolean} */ export function isExternal(path) { return /^(https?:|mailto:|tel:)/.test(path) } /** * @param {string} str * @returns {Boolean} */ export function validUsername(str) { const valid_map = ['admin', 'editor'] return valid_map.indexOf(str.trim()) &gt;= 0 } /** * @param {string} url * @returns {Boolean} */ export function validURL(url) { const reg = /^(https?|ftp):\\/\\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&amp;%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]?)(\\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|([a-zA-Z0-9-]+\\.)*[a-zA-Z0-9-]+\\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(\\/($|[a-zA-Z0-9.,?'\\\\+&amp;%$#=~_-]+))*$/ return reg.test(url) } /** * @param {string} str * @returns {Boolean} */ export function validLowerCase(str) { const reg = /^[a-z]+$/ return reg.test(str) } /** * @param {string} str * @returns {Boolean} */ export function validUpperCase(str) { const reg = /^[A-Z]+$/ return reg.test(str) } /** * @param {string} str * @returns {Boolean} */ export function validAlphabets(str) { const reg = /^[A-Za-z]+$/ return reg.test(str) } /** * @param {string} email * @returns {Boolean} */ export function validEmail(email) { const reg = /^(([^&lt;&gt;()\\[\\]\\\\.,;:\\s@\"]+(\\.[^&lt;&gt;()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/ return reg.test(email) } /** * @param {string} str * @returns {Boolean} */ export function isString(str) { if (typeof str === 'string' || str instanceof String) { return true } return false } /** * @param {Array} arg * @returns {Boolean} */ export function isArray(arg) { if (typeof Array.isArray === 'undefined') { return Object.prototype.toString.call(arg) === '[object Array]' } return Array.isArray(arg) } × Search results Close "},"components_ImageCropper_utils_data2blob.js.html":{"id":"components_ImageCropper_utils_data2blob.js.html","title":"Source: components/ImageCropper/utils/data2blob.js","body":" Common Modules Global addClassasyncRoutesbyteLengthcardSortcheckSubjectcleanArrayconstantRoutescreateUniqueStringdataTypedebouncedeepClonedoResizefilterAsyncRoutesformatTimegetFullDatagetQueryObjectgetTimehasClasshasPermissionhtml2TextisArrayisExternalisStringmovenumberFormatterobjectMergeparamparam2ObjparseTimepluralizeremoveClassscrollTosorttimeAgotoggleClasstoThousandFilteruniqueuniqueArruppercaseFirstvalidAlphabetsvalidEmailvalidLowerCasevalidUpperCasevalidURLvalidUsernamewashValue Source: components/ImageCropper/utils/data2blob.js /** * database64文件格式转换为2进制 * * @param {[String]} data dataURL 的格式为 “data:image/png;base64,****”,逗号之前都是一些说明性的文字，我们只需要逗号之后的就行了 * @param {[String]} mime [description] * @return {[blob]} [description] */ export default function(data, mime) { data = data.split(',')[1] data = window.atob(data) var ia = new Uint8Array(data.length) for (var i = 0; i &lt; data.length; i++) { ia[i] = data.charCodeAt(i) } // canvas.toDataURL 返回的默认格式就是 image/png return new Blob([ia], { type: mime }) } × Search results Close "},"components_ImageCropper_utils_effectRipple.js.html":{"id":"components_ImageCropper_utils_effectRipple.js.html","title":"Source: components/ImageCropper/utils/effectRipple.js","body":" Common Modules Global addClassasyncRoutesbyteLengthcardSortcheckSubjectcleanArrayconstantRoutescreateUniqueStringdataTypedebouncedeepClonedoResizefilterAsyncRoutesformatTimegetFullDatagetQueryObjectgetTimehasClasshasPermissionhtml2TextisArrayisExternalisStringmovenumberFormatterobjectMergeparamparam2ObjparseTimepluralizeremoveClassscrollTosorttimeAgotoggleClasstoThousandFilteruniqueuniqueArruppercaseFirstvalidAlphabetsvalidEmailvalidLowerCasevalidUpperCasevalidURLvalidUsernamewashValue Source: components/ImageCropper/utils/effectRipple.js /** * 点击波纹效果 * * @param {[event]} e [description] * @param {[Object]} arg_opts [description] * @return {[bollean]} [description] */ export default function(e, arg_opts) { var opts = Object.assign({ ele: e.target, // 波纹作用元素 type: 'hit', // hit点击位置扩散center中心点扩展 bgc: 'rgba(0, 0, 0, 0.15)' // 波纹颜色 }, arg_opts) var target = opts.ele if (target) { var rect = target.getBoundingClientRect() var ripple = target.querySelector('.e-ripple') if (!ripple) { ripple = document.createElement('span') ripple.className = 'e-ripple' ripple.style.height = ripple.style.width = Math.max(rect.width, rect.height) + 'px' target.appendChild(ripple) } else { ripple.className = 'e-ripple' } switch (opts.type) { case 'center': ripple.style.top = (rect.height / 2 - ripple.offsetHeight / 2) + 'px' ripple.style.left = (rect.width / 2 - ripple.offsetWidth / 2) + 'px' break default: ripple.style.top = (e.pageY - rect.top - ripple.offsetHeight / 2 - document.body.scrollTop) + 'px' ripple.style.left = (e.pageX - rect.left - ripple.offsetWidth / 2 - document.body.scrollLeft) + 'px' } ripple.style.backgroundColor = opts.bgc ripple.className = 'e-ripple z-active' return false } } × Search results Close "},"utils_open-window.js.html":{"id":"utils_open-window.js.html","title":"Source: utils/open-window.js","body":" Common Modules Global addClassasyncRoutesbyteLengthcardSortcheckSubjectcleanArrayconstantRoutescreateUniqueStringdataTypedebouncedeepClonedoResizefilterAsyncRoutesformatTimegetFullDatagetQueryObjectgetTimehasClasshasPermissionhtml2TextisArrayisExternalisStringmovenumberFormatterobjectMergeparamparam2ObjparseTimepluralizeremoveClassscrollTosorttimeAgotoggleClasstoThousandFilteruniqueuniqueArruppercaseFirstvalidAlphabetsvalidEmailvalidLowerCasevalidUpperCasevalidURLvalidUsernamewashValue Source: utils/open-window.js /** *Created by PanJiaChen on 16/11/29. * @param {Sting} url * @param {Sting} title * @param {Number} w * @param {Number} h */ export default function openWindow(url, title, w, h) { // Fixes dual-screen position Most browsers Firefox const dualScreenLeft = window.screenLeft !== undefined ? window.screenLeft : screen.left const dualScreenTop = window.screenTop !== undefined ? window.screenTop : screen.top const width = window.innerWidth ? window.innerWidth : document.documentElement.clientWidth ? document.documentElement.clientWidth : screen.width const height = window.innerHeight ? window.innerHeight : document.documentElement.clientHeight ? document.documentElement.clientHeight : screen.height const left = ((width / 2) - (w / 2)) + dualScreenLeft const top = ((height / 2) - (h / 2)) + dualScreenTop const newWindow = window.open(url, title, 'toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=yes, copyhistory=no, width=' + w + ', height=' + h + ', top=' + top + ', left=' + left) // Puts focus on the newWindow if (window.focus) { newWindow.focus() } } × Search results Close "},"utils_permission.js.html":{"id":"utils_permission.js.html","title":"Source: utils/permission.js","body":" Common Modules Global addClassasyncRoutesbyteLengthcardSortcheckSubjectcleanArrayconstantRoutescreateUniqueStringdataTypedebouncedeepClonedoResizefilterAsyncRoutesformatTimegetFullDatagetQueryObjectgetTimehasClasshasPermissionhtml2TextisArrayisExternalisStringmovenumberFormatterobjectMergeparamparam2ObjparseTimepluralizeremoveClassscrollTosorttimeAgotoggleClasstoThousandFilteruniqueuniqueArruppercaseFirstvalidAlphabetsvalidEmailvalidLowerCasevalidUpperCasevalidURLvalidUsernamewashValue Source: utils/permission.js import store from '@/store' /** * @param {Array} value * @returns {Boolean} * @example see @/views/permission/directive.vue */ export default function checkPermission(value) { if (value &amp;&amp; value instanceof Array &amp;&amp; value.length &gt; 0) { const roles = store.getters &amp;&amp; store.getters.roles const permissionRoles = value const hasPermission = roles.some(role =&gt; { return permissionRoles.includes(role) }) if (!hasPermission) { return false } return true } else { console.error(`need roles! Like v-permission=\"['admin','editor']\"`) return false } } × Search results Close "},"settings.js.html":{"id":"settings.js.html","title":"Source: settings.js","body":" Common Modules Global addClassasyncRoutesbyteLengthcardSortcheckSubjectcleanArrayconstantRoutescreateUniqueStringdataTypedebouncedeepClonedoResizefilterAsyncRoutesformatTimegetFullDatagetQueryObjectgetTimehasClasshasPermissionhtml2TextisArrayisExternalisStringmovenumberFormatterobjectMergeparamparam2ObjparseTimepluralizeremoveClassscrollTosorttimeAgotoggleClasstoThousandFilteruniqueuniqueArruppercaseFirstvalidAlphabetsvalidEmailvalidLowerCasevalidUpperCasevalidURLvalidUsernamewashValue Source: settings.js module.exports = { title: 'BPO运营数据分析工具系统', /** * @type {boolean} true | false * @description Whether show the settings right-panel */ showSettings: true, /** * @type {boolean} true | false * @description Whether need tagsView */ tagsView: true, /** * @type {boolean} true | false * @description Whether fix the header */ fixedHeader: false, /** * @type {boolean} true | false * @description Whether show the logo in sidebar */ sidebarLogo: true, /** * @type {string | array} 'production' | ['production', 'development'] * @description Need show err logs component. * The default is only used in the production env * If you want to also use it in dev, you can pass ['production', 'development'] */ errorLog: ['production', 'development'] } × Search results Close "},"utils_scroll-to.js.html":{"id":"utils_scroll-to.js.html","title":"Source: utils/scroll-to.js","body":" Common Modules Global addClassasyncRoutesbyteLengthcardSortcheckSubjectcleanArrayconstantRoutescreateUniqueStringdataTypedebouncedeepClonedoResizefilterAsyncRoutesformatTimegetFullDatagetQueryObjectgetTimehasClasshasPermissionhtml2TextisArrayisExternalisStringmovenumberFormatterobjectMergeparamparam2ObjparseTimepluralizeremoveClassscrollTosorttimeAgotoggleClasstoThousandFilteruniqueuniqueArruppercaseFirstvalidAlphabetsvalidEmailvalidLowerCasevalidUpperCasevalidURLvalidUsernamewashValue Source: utils/scroll-to.js Math.easeInOutQuad = function(t, b, c, d) { t /= d / 2 if (t &lt; 1) { return c / 2 * t * t + b } t-- return -c / 2 * (t * (t - 2) - 1) + b } // requestAnimationFrame for Smart Animating http://goo.gl/sx5sts var requestAnimFrame = (function() { return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || function(callback) { window.setTimeout(callback, 1000 / 60) } })() /** * Because it's so fucking difficult to detect the scrolling element, just move them all * @param {number} amount */ function move(amount) { document.documentElement.scrollTop = amount document.body.parentNode.scrollTop = amount document.body.scrollTop = amount } function position() { return document.documentElement.scrollTop || document.body.parentNode.scrollTop || document.body.scrollTop } /** * @param {number} to * @param {number} duration * @param {Function} callback */ export function scrollTo(to, duration, callback) { const start = position() const change = to - start const increment = 20 let currentTime = 0 duration = (typeof (duration) === 'undefined') ? 500 : duration var animateScroll = function() { // increment the time currentTime += increment // find the value with the quadratic in-out easing function var val = Math.easeInOutQuad(currentTime, start, change, duration) // move the document.body move(val) // do the animation unless its over if (currentTime &lt; duration) { requestAnimFrame(animateScroll) } else { if (callback &amp;&amp; typeof (callback) === 'function') { // the animation is done so lets callback callback() } } } animateScroll() } × Search results Close "},"global.html":{"id":"global.html","title":"Global","body":" Common Modules Global addClassasyncRoutesbyteLengthcardSortcheckSubjectcleanArrayconstantRoutescreateUniqueStringdataTypedebouncedeepClonedoResizefilterAsyncRoutesformatTimegetFullDatagetQueryObjectgetTimehasClasshasPermissionhtml2TextisArrayisExternalisStringmovenumberFormatterobjectMergeparamparam2ObjparseTimepluralizeremoveClassscrollTosorttimeAgotoggleClasstoThousandFilteruniqueuniqueArruppercaseFirstvalidAlphabetsvalidEmailvalidLowerCasevalidUpperCasevalidURLvalidUsernamewashValue Global Members &lt;constant&gt; asyncRoutes asyncRoutes the routes that need to be dynamically loaded based on user roles Source: router/index.js, line 138 &lt;constant&gt; constantRoutes constantRoutes a base page that does not have permission requirements all roles can be accessed Source: router/index.js, line 41 Methods addClass(elm, cls) Add class to element Parameters: Name Type Description elm HTMLElement cls string Source: utils/index.js, line 441 byteLength(input) → {number} Parameters: Name Type Description input string value Source: utils/index.js, line 180 Returns: output value Type number cardSort(arr) → {Array} Parameters: Name Type Description arr Source: utils/index.js, line 409 Returns: Type Array checkSubject(subjects, views) → {number} Parameters: Name Type Description subjects views Source: utils/index.js, line 126 Returns: output value Type number cleanArray(actual) → {Array} Parameters: Name Type Description actual Array Source: utils/index.js, line 206 Returns: Type Array createUniqueString() → {string} Source: utils/index.js, line 420 Returns: Type string dataType(value, type) → {string} Show plural label if time is plural number Parameters: Name Type Description value type Source: filters/index.js, line 10 Returns: Type string debounce(func, wait, immediate) → {*} Parameters: Name Type Description func function wait number immediate boolean Source: utils/index.js, line 322 Returns: Type * deepClone(source) → {Object} This is just a simple version of deep copy Has a lot of edge cases bug If you want to use a perfect deep copy, use lodash's _.cloneDeep Parameters: Name Type Description source Object Source: utils/index.js, line 364 Returns: Type Object doResize() How to use ... el-table height is must be set bottomOffset: 30(default) // The height of the table from the bottom of the page. Source: directive/el-table/adaptive.js, line 10 filterAsyncRoutes(routes, roles) Filter asynchronous routing tables by recursion Parameters: Name Type Description routes asyncRoutes roles Source: store/modules/permission.js, line 21 formatTime(time, option) → {string} Parameters: Name Type Description time number option string Source: utils/index.js, line 64 Returns: Type string getFullData(params) → {*} 主要数据处理过程 Parameters: Name Type Description params Source: utils/dataProce.js, line 13 Returns: Type * getFullData(params) → {*} 主要数据处理过程 Parameters: Name Type Description params Source: utils/dataProce_v1.js, line 13 Returns: Type * getQueryObject(url) → {Object} Parameters: Name Type Description url string Source: utils/index.js, line 106 Returns: Type Object getTime(type) → {Date} Parameters: Name Type Description type string Source: utils/index.js, line 308 Returns: Type Date hasClass(elm, cls) → {boolean} Check if an element has a class Parameters: Name Type Description elm HTMLElement cls string Source: utils/index.js, line 432 Returns: Type boolean hasPermission(roles, route) Use meta.role to determine if the current user has permission Parameters: Name Type Description roles route Source: store/modules/permission.js, line 8 html2Text(val) → {string} Parameters: Name Type Description val string Source: utils/index.js, line 254 Returns: Type string isArray(arg) → {Boolean} Parameters: Name Type Description arg Array Source: utils/validate.js, line 82 Returns: Type Boolean isExternal(path) → {Boolean} Parameters: Name Type Description path string Source: utils/validate.js, line 9 Returns: Type Boolean isString(str) → {Boolean} Parameters: Name Type Description str string Source: utils/validate.js, line 71 Returns: Type Boolean move(amount) Because it's so fucking difficult to detect the scrolling element, just move them all Parameters: Name Type Description amount number Source: utils/scroll-to.js, line 19 numberFormatter(num, digits) Number formatting like 10000 =&gt; 10k Parameters: Name Type Description num number digits number Source: filters/index.js, line 78 objectMerge(target, source) → {Object} Merges two objects, giving the last one precedence Parameters: Name Type Description target Object source Object | Array Source: utils/index.js, line 266 Returns: Type Object param(json) → {Array} Parameters: Name Type Description json Object Source: utils/index.js, line 220 Returns: Type Array param2Obj(url) → {Object} Parameters: Name Type Description url string Source: utils/index.js, line 234 Returns: Type Object parseTime(time, cFormat) → {string|null} Parse the time to string Parameters: Name Type Description time Object | string | number cFormat string Source: utils/index.js, line 14 Returns: Type string | null pluralize(time, label) → {string} Show plural label if time is plural number Parameters: Name Type Description time number label string Source: filters/index.js, line 51 Returns: Type string removeClass(elm, cls) Remove class from element Parameters: Name Type Description elm HTMLElement cls string Source: utils/index.js, line 450 scrollTo(to, duration, callback) Parameters: Name Type Description to number duration number callback function Source: utils/scroll-to.js, line 34 sort(arr) → {Array} Parameters: Name Type Description arr Array Source: utils/index.js, line 399 Returns: Type Array timeAgo(time) Parameters: Name Type Description time number Source: filters/index.js, line 61 toggleClass(element, className) Parameters: Name Type Description element HTMLElement className string Source: utils/index.js, line 288 toThousandFilter(num) 10000 =&gt; \"10,000\" Parameters: Name Type Description num number Source: filters/index.js, line 99 unique(arr) → {Array} Parameters: Name Type Description arr Array Source: utils/index.js, line 391 Returns: Type Array uniqueArr(arr) → {Array} Parameters: Name Type Description arr Array Source: utils/index.js, line 383 Returns: Type Array uppercaseFirst(string) Upper case first char Parameters: Name Type Description string String Source: filters/index.js, line 107 validAlphabets(str) → {Boolean} Parameters: Name Type Description str string Source: utils/validate.js, line 53 Returns: Type Boolean validEmail(email) → {Boolean} Parameters: Name Type Description email string Source: utils/validate.js, line 62 Returns: Type Boolean validLowerCase(str) → {Boolean} Parameters: Name Type Description str string Source: utils/validate.js, line 35 Returns: Type Boolean validUpperCase(str) → {Boolean} Parameters: Name Type Description str string Source: utils/validate.js, line 44 Returns: Type Boolean validURL(url) → {Boolean} Parameters: Name Type Description url string Source: utils/validate.js, line 26 Returns: Type Boolean validUsername(str) → {Boolean} Parameters: Name Type Description str string Source: utils/validate.js, line 17 Returns: Type Boolean washValue(value) → {Array} Parameters: Name Type Description value Source: utils/index.js, line 196 Returns: Type Array × Search results Close "},"index.html":{"id":"index.html","title":"Index","body":" Common Modules Global addClassasyncRoutesbyteLengthcardSortcheckSubjectcleanArrayconstantRoutescreateUniqueStringdataTypedebouncedeepClonedoResizefilterAsyncRoutesformatTimegetFullDatagetQueryObjectgetTimehasClasshasPermissionhtml2TextisArrayisExternalisStringmovenumberFormatterobjectMergeparamparam2ObjparseTimepluralizeremoveClassscrollTosorttimeAgotoggleClasstoThousandFilteruniqueuniqueArruppercaseFirstvalidAlphabetsvalidEmailvalidLowerCasevalidUpperCasevalidURLvalidUsernamewashValue todo Debug UHD 显示调试信息的监视器。 新git地址 https://github.com/Xiaomei-Zhang/operation_analytics_frontend release 1.1 Dashboard/Components/Drag Dialog 拖拽弹窗 Dashboard/Permission/Role Permission 权限控制，角色权限配置 Dashboard/Table/Drag Table 拖拽表格微信 Dashboard/Excel/Upload Excel 上传，展开表格 ？问题 图表页面无法嵌套 src=\"http://172.20.95.130:8086/hi.html?dir=Sample%20Reports/custom-0331&amp;file=sample_dashboard.efw&amp;mode=open\" Alias—— &lt;projectRoot&gt;/node_modules/@vue/cli-service/webpack.config.js mongodb连接 network interfaces net: port: 27017 bindIpAll: true todo 最大化面板 1. 设置最大化标记 flag max 记录原始值（高、宽） 计算最大高、宽 收缩菜单栏 放大面板，还原面板（高宽） 关于排序方案 如果多个数组的内容是有理的，取最长的一个为基准即可 如果内容是无理的，那取任何一个都是不准的 × Search results Close "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
